<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Zorka</title>
  <link href="/assets/style.css" rel="stylesheet">
  <script async src="/assets/script.js"></script>
</head>

<body class="bg-black text-white relative">
  <nav class="text-right px-4 py-2 bg-offblack border-b border-offblack2">
    <button class="px-4 py-1 rounded bg-blue-700 focus:outline focus:outline-1 focus:outline-solid"
      onclick="create(event)">upsert</button>
  </nav>
  <main class="p-4">
    <table class="w-full table-fixed">
      <thead>
        <tr>
          <th class="px-4 py-2 text-left bg-offblack border border-offblack2">Slug</th>
          <th class="px-4 py-2 text-left bg-offblack border border-offblack2 hidden md:table-cell w-1/2">URL</th>
          <th class="px-4 py-2 text-left bg-offblack border border-offblack2 hidden md:table-cell">Status</th>
          <th class="px-4 py-2 text-left bg-offblack border border-offblack2">Action</th>
        </tr>
      </thead>
      <tbody>
        {% for item in items %}
        <tr id="{{ item.slug }}">
          <td class="px-4 py-2 border border-offblack2">
            <button
              class="group/copy transition-colors hover:text-blue-500 focus:outline focus:outline-1 active:outline-none focus:outline-solid"
              onclick="copy(event)">
              <svg class="group-active/copy:scale-75 pointer-events-none" fill="currentColor" focusable="false"
                aria-hidden="true" viewBox="0 0 24 24" height="20" width="20">
                <path
                  d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z">
                </path>
              </svg>
            </button>
            <span class="truncate">{{ item.slug }}</span>
          </td>
          <td class="px-4 py-2 border border-offblack2 truncate hidden md:table-cell">{{ item.url }}</td>
          <td class="px-4 py-2 border border-offblack2 truncate hidden md:table-cell" data-since="{{item.since}}"
            data-until="{{item.until}}">
            {% if item.now < item.since %} countdown {% elif item.now> item.until %}
              blocked
              {% else %}
              reachable
              {% endif %}
          </td>
          <td class="px-4 py-2 border border-offblack2">
            <button
              class="group/edit transition-colors hover:text-blue-500 px-1 focus:outline focus:outline-1 active:outline-none focus:outline-solid"
              onclick="edit(event, '{{ item.slug }}')">
              <span class="group-active/edit:scale-75 block pointer-events-none">edit</span>
            </button>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </main>
  <form id="edit" class="hidden fixed top-0 h-screen left-0 w-full bg-black/90" onclick="hide(event,'edit')"
    onsubmit="return put(event)">
    <div
      class="mt-[10vh] mx-auto w-full sm:w-[640px] flex flex-col gap-y-4 p-4 rounded animate-slidein bg-offblack rounded border border-offblack2">
      <div>
        <label class="block text-sm text-zinc-400">Slug</label>
        <input type="text" name="slug"
          class="bg-black px-4 py-2 w-full focus:outline focus:outline-1 focus:outline-solid">
      </div>
      <div>
        <label class="block text-sm text-zinc-400">Redirect target</label>
        <input class="bg-black px-4 py-2 w-full focus:outline focus:outline-1 focus:outline-solid" type="url"
          name="url">
      </div>
      <div>
        <label class="block text-sm text-zinc-400">Available from</label>
        <div class="grid md:grid-cols-2 gap-4">
          <input class="bg-black text-center px-4 py-2 w-full focus:outline focus:outline-1 focus:outline-solid"
            type="date" name="fromdate">
          <input class="bg-black text-center px-4 py-2 w-full focus:outline focus:outline-1 focus:outline-solid"
            type="time" name="fromtime" step="1">
        </div>
      </div>
      <div>
        <label class="block text-sm text-zinc-400">Not available after</label>
        <div class="grid md:grid-cols-2 gap-4">
          <input class="bg-black text-center px-4 py-2 w-full focus:outline focus:outline-1 focus:outline-solid"
            type="date" name="todate">
          <input class="bg-black text-center px-4 py-2 w-full focus:outline focus:outline-1 focus:outline-solid"
            type="time" name="totime" step="1">
        </div>
      </div>
      <div class="flex">
        <button
          class="w-24 px-4 py-2 bg-offblack2 rounded focus:outline focus:outline-1 focus:outline-solid focus:bg-blue-700 hover:bg-blue-700"
          type="submit">send</button>
        <span class="p-2 flex-grow text-rose-500"></span>
        <button type="button" disabled
          class="w-24 px-4 py-2 bg-offblack2 disabled:opacity-0 rounded focus:outline focus:outline-1 focus:outline-solid focus:bg-rose-700 hover:bg-rose-700">delete</button>
      </div>
    </div>
  </form>
</body>

</html>
